# Story 6.9: Revision Bundle - Push Notification System

**Epic:** 6 - Progress Tracking & Personalization
**Story Number:** 6.9
**Status:** Draft
**Created:** December 23, 2025
**Sprint:** Sprint 7 (Epic 6)
**Estimated Effort:** Small (S)
**Risk Level:** LOW

---

## Story

**As a** UPSC aspirant,
**I want** to receive timely push notifications reminding me to complete my revision bundles,
**so that** I stay consistent with my revision schedule.

---

## Acceptance Criteria

1. Notification types: Weekly targets ready (Sunday), Daily reminder (user-chosen time), Flashcard review due, Quiz available
2. User preferences: /settings page allows users to enable/disable each notification type and set preferred time
3. Database: `notification_preferences` table with user_id, notification_type, enabled, preferred_time
4. Scheduling: uses Supabase Edge Functions with cron triggers for scheduled notifications
5. Push service: integrates Firebase Cloud Messaging (FCM) for web/mobile push notifications
6. Notification content: "Your weekly revision targets are ready! 5 topics need your attention." with deep link to /revision
7. Batching: sends notifications in batches to avoid rate limits (max 1000/batch)
8. Analytics: tracks notification delivery rate, open rate, action rate
9. Opt-out: users can snooze all notifications for 1 day, 3 days, or 1 week
10. Respect quiet hours: no notifications between 10 PM - 8 AM unless user explicitly allows

---

## Dependencies

**Blocking:** Stories 6.3, 6.5, 6.6 (revision bundles created)
**Blocks:** None

---

## Definition of Done

- [ ] All AC met
- [ ] Notifications sent successfully
- [ ] User preferences respected
- [ ] Deep links working
- [ ] Tests passing

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-23 | 1.0 | Initial story creation | Bob (SM Agent) |
