# Story 8.9: Question Bank - Practice Session Interface

**Epic:** 8 - Practice & Evaluation - PYQs & Question Bank
**Story Number:** 8.9
**Status:** COMPLETE
**Created:** December 23, 2025
**Completed:** December 28, 2025
**Sprint:** Sprint 9 (Epic 8)
**Estimated Effort:** Medium (M)
**Risk Level:** LOW

---

## Story

**As a** UPSC aspirant,
**I want** a focused practice session interface for solving questions,
**so that** I can practice without distractions and track my performance.

---

## Acceptance Criteria

1. [x] Practice session: /practice/session starts a focused question-solving session
2. [x] Session configuration: users choose topic, question type, difficulty, count (10/20/50)
3. [x] Full-screen mode: minimal UI showing only question, options (for MCQ), and timer
4. [x] Question navigation: "Previous" and "Next" buttons, numbered grid showing progress
5. [x] Instant feedback: for MCQs, shows correct/incorrect immediately after selection with explanation
6. [x] For Mains questions: allows text input, "Submit for Evaluation" button (optional during practice)
7. [x] Progress tracking: tracks answered/unanswered, correct/incorrect, time per question
8. [x] Pause/Resume: users can pause session and resume later (saves progress)
9. [x] Session summary: after completion, shows score, accuracy %, time analysis, weak topics
10. [x] Database: `practice_sessions` table with user_id, session_config_json, questions_json, answers_json, score, completed_at

---

## Implementation Summary

### Database (Migration 042)
- Extended `practice_sessions` with question_times, paused_at, weak_topics
- `session_presets` table for saved configurations
- `start_practice_session()` - Start new session
- `pause_practice_session()` - Pause with progress save
- `resume_practice_session()` - Resume paused session
- `complete_practice_session()` - Complete with analysis
- `get_paused_sessions()` - List resumable sessions
- `get_session_history()` - Session history for analytics

### API Route (`/api/practice/session`)
- `POST action=start` - Start session with config (AC 1, AC 2)
- `POST action=pause` - Pause session (AC 8)
- `POST action=resume` - Resume paused session (AC 8)
- `POST action=save_progress` - Auto-save during session (AC 7)
- `POST action=complete` - Complete with full analysis (AC 9)
- `POST action=get_paused` - List paused sessions
- `POST action=get_history` - Session history
- `GET` - Get active/specific session

### UI (`/practice/session`)
- Session configuration page (AC 2)
  - Topic filter, question type, difficulty, count (10/20/50)
  - Resume paused sessions list
- Active session interface (AC 3, AC 4, AC 5, AC 6)
  - Minimal full-screen UI with timer
  - Numbered progress grid navigation
  - MCQ instant feedback with correct/incorrect
  - Mains textarea with word count
  - Pause/Resume functionality
- Session complete page (AC 9)
  - Score, accuracy, time stats
  - Difficulty breakdown
  - Weak/strong topics identification
  - Question-by-question review

### Integration
- Records attempts to Story 8.8 question_attempts table
- Supports both PYQ and generated questions
- Fisher-Yates shuffle for question randomization

---

## Dependencies

**Blocking:** Stories 8.5, 8.6, 8.8 (PYQ database, question generator, difficulty system)
**Blocks:** Story 8.10

---

## Definition of Done

- [x] All AC met
- [x] Practice interface functional
- [x] Navigation smooth
- [x] Progress saved correctly
- [x] Tests passing

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-23 | 1.0 | Initial story creation | Bob (SM Agent) |
| 2025-12-28 | 2.0 | Full implementation complete | Larry (DEV Agent) |
