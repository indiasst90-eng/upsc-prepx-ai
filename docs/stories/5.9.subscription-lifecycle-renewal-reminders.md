# Story 5.9: Subscription Lifecycle - Renewal & Reminders

**Epic:** 5 - Monetization & Subscription System
**Story Number:** 5.9
**Status:** Draft
**Created:** December 23, 2025
**Sprint:** Sprint 6
**Estimated Effort:** Medium (M)
**Risk Level:** MEDIUM

---

## Story

**As a** UPSC aspirant,
**I want** to receive reminders before my subscription renews or expires,
**so that** I can decide whether to continue, cancel, or update payment details.

---

## Acceptance Criteria

1. Renewal reminders: email sent 7 days, 3 days, 1 day before renewal
2. Email content: renewal date, amount, payment method, Cancel or Update links
3. Expiry warnings: for cancelled subscriptions, remind 3 days before access ends
4. Auto-renewal: charge payment method on renewal date, update subscription_expires_at
5. Failed renewal: retry 3 times over 3 days, email user each attempt
6. Grace period: 3 days after expiry before downgrade to Free
7. Downgrade notification: email when downgraded, explain what features are lost
8. Re-subscription: if user re-subscribes within 30 days, restore progress data
9. Scheduled jobs: pg_cron checks renewals daily at 6 AM
10. Admin override: manually mark subscription as renewed

---

## Dependencies

**Blocking:** Stories 5.2, 5.3
**Blocks:** None

---

## Definition of Done

- [ ] All AC met
- [ ] Renewal reminders sending
- [ ] Auto-renewal working
- [ ] Failed renewal retry working
- [ ] Grace period enforced
- [ ] Scheduled jobs running

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-23 | 1.0 | Initial story creation | Bob (SM Agent) |
