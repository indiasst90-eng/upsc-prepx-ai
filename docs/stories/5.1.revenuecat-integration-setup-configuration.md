# Story 5.1: RevenueCat Integration - Setup & Configuration

**Epic:** 5 - Monetization & Subscription System
**Story Number:** 5.1
**Status:** Draft
**Created:** December 23, 2025
**Sprint:** Sprint 6 (Epic 5)
**Estimated Effort:** Large (L)
**Risk Level:** HIGH (Critical for revenue)

---

## Story

**As a** backend developer,
**I want** RevenueCat SDK integrated for subscription management across web and future mobile apps,
**so that** we have unified subscription state and cross-platform entitlement management.

---

## Acceptance Criteria

1. RevenueCat project created: app configured for Web, iOS (future), Android (future)
2. Product IDs: pro_monthly, pro_quarterly, pro_half_yearly, pro_annual
3. Entitlements configured: pro_access (grants access to all premium features)
4. RevenueCat Web SDK installed: @revenuecat/purchases-js
5. Backend integration: webhook endpoint POST /api/webhooks/revenuecat
6. Supabase RLS policies: users can only read own subscription
7. Sync job: webhook updates subscriptions table
8. Environment variables: REVENUECAT_API_KEY, REVENUECAT_WEBHOOK_SECRET
9. Test mode: sandbox environment for testing
10. Documentation: internal docs for adding products/entitlements

---

## Dependencies

**Blocking:** Story 1.3 (subscriptions table)
**Blocks:** Stories 5.2, 5.4

---

## Definition of Done

- [ ] All AC met
- [ ] RevenueCat configured
- [ ] SDK integrated
- [ ] Webhook working
- [ ] Sync tested
- [ ] Test purchases working

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-23 | 1.0 | Initial story creation | Bob (SM Agent) |
