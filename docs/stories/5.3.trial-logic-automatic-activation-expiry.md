# Story 5.3: Trial Logic - Automatic Activation & Expiry

**Epic:** 5 - Monetization & Subscription System
**Story Number:** 5.3
**Status:** Draft
**Created:** December 23, 2025
**Sprint:** Sprint 6
**Estimated Effort:** Medium (M)
**Risk Level:** HIGH (Business critical)

---

## Story

**As a** UPSC aspirant,
**I want** a 7-day free trial with full Pro access automatically activated on signup,
**so that** I can evaluate all premium features before committing to a subscription.

---

## Acceptance Criteria

1. On signup: subscription created (status = trial, trial_expires_at = NOW() + 7 days)
2. Entitlement function: checkEntitlement returns true if NOW() <= trial_expires_at
3. Trial badge: "Trial: 5 days left" in header
4. Email notifications: Day 1, 3, 5, 7
5. Post-trial: user not blocked, premium features show upgrade modal
6. One trial per user: check by email and phone
7. Trial extension: admin can extend manually
8. Analytics: trial-to-paid conversion tracked
9. Dashboard countdown: visual progress bar
10. Grace period: subscription on Day 7 starts immediately

---

## Dependencies

**Blocking:** Stories 1.2, 1.3, 5.1
**Blocks:** Story 5.4

---

## Definition of Done

- [ ] All AC met
- [ ] Trial auto-created
- [ ] Countdown displayed
- [ ] Email notifications working
- [ ] Expiry handled correctly
- [ ] One-trial enforcement working

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-23 | 1.0 | Initial story creation | Bob (SM Agent) |
