# Story 8.10: Question Bank - Analytics & Insights Dashboard

**Epic:** 8 - Practice & Evaluation - PYQs & Question Bank
**Story Number:** 8.10
**Status:** COMPLETE
**Created:** December 23, 2025
**Completed:** December 28, 2025
**Sprint:** Sprint 9 (Epic 8)
**Estimated Effort:** Medium (M)
**Risk Level:** LOW

---

## Story

**As a** UPSC aspirant,
**I want** detailed analytics on my practice performance,
**so that** I can identify patterns, track improvement, and optimize my preparation strategy.

---

## Acceptance Criteria

1. [x] Analytics dashboard: /practice/analytics displays comprehensive question-solving statistics
2. [x] Overall stats: total questions attempted, accuracy %, average time per question, streak
3. [x] Subject-wise breakdown: accuracy % and question count for each subject (Polity, History, etc.)
4. [x] Difficulty analysis: performance across Easy/Medium/Hard questions with trend graphs
5. [x] Time analysis: identifies if user is rushing (avg <60s per MCQ) or too slow (>3 min per MCQ)
6. [x] Improvement tracking: line graph showing accuracy % over last 30 days
7. [x] Weak topics: automatically identifies topics with <50% accuracy, recommends focus areas
8. [x] Strong topics: highlights topics with >80% accuracy, suggests moving to harder questions
9. [x] PYQ coverage: shows % of PYQs attempted by year and paper type
10. [x] AI insights: generates personalized recommendations "You're strong in Polity but weak in Environment. Practice 20 Environment MCQs this week."

---

## Implementation Summary

### Database (Migration 043)
- `get_subject_analytics()` - Subject-wise performance breakdown (AC 3)
- `get_time_analysis()` - Time analysis with rushing/slow detection (AC 5)
- `get_topic_analysis()` - Weak (<50%) and strong (>80%) topics (AC 7, 8)
- `get_pyq_coverage()` - PYQ coverage by year and paper (AC 9)
- `get_ai_insights_data()` - AI-powered personalized insights (AC 10)
- `get_complete_analytics()` - Comprehensive dashboard data

### API Route (`/api/analytics`)
- `POST action=get_complete` - Fetch all analytics in one call
- `POST action=get_subjects` - Subject breakdown only
- `POST action=get_time` - Time analysis only
- `POST action=get_topics` - Weak/strong topics
- `POST action=get_pyq` - PYQ coverage stats
- `POST action=get_insights` - Get AI insights
- `POST action=generate_ai_recommendations` - Generate new AI recommendations
- `GET` - Quick stats endpoint

### UI (`/practice/analytics`)
- **Overview Tab**: Overall stats, time analysis, difficulty breakdown, 30-day trend
- **Subjects Tab**: Subject-wise performance with accuracy bars (AC 3)
- **PYQ Tab**: PYQ coverage by year and paper type (AC 9)
- **Insights Tab**: AI-generated personalized recommendations (AC 10)

### Features
- Color-coded accuracy indicators (green >80%, yellow 50-80%, red <50%)
- Time status alerts (rushing/optimal/too slow)
- Bar chart visualization for 30-day trend (AC 6)
- Tabbed interface for organized navigation
- Real-time AI recommendation generation
- Fallback to rule-based recommendations when AI unavailable

---

## Dependencies

**Blocking:** Stories 8.9, 8.8 (practice sessions, difficulty system)
**Blocks:** None

---

## Definition of Done

- [x] All AC met
- [x] Analytics comprehensive
- [x] Insights actionable
- [x] Visualizations clear
- [x] Tests passing

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-23 | 1.0 | Initial story creation | Bob (SM Agent) |
| 2025-12-28 | 2.0 | Full implementation complete | Larry (DEV Agent) |
