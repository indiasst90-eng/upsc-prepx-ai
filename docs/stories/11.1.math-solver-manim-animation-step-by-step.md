# Story 11.1: Math Solver - Manim Animation Step-by-Step

**Epic:** 11 - Specialized Learning - Math Solver, Memory Palace & Maps
**Story Number:** 11.1
**Status:** COMPLETE
**Created:** December 23, 2025
**Completed:** December 28, 2025
**Sprint:** Sprint 11 (Epic 11)
**Estimated Effort:** Large (L)
**Risk Level:** HIGH

---

## Story

**As a** UPSC aspirant,
**I want** to see animated step-by-step solutions to math problems (CSAT/Economy),
**so that** I can understand quantitative concepts visually.

---

## Acceptance Criteria

1. Input methods: typed equation, image upload (handwritten/printed)
2. OCR processing: extract math expressions, identify problem type
3. Problem classification: arithmetic, algebra, geometry, data interpretation, graphs
4. Step generation: LLM generates 5-10 solution steps with reasoning
5. Manim animation specs:
   - Equation writing animation
   - Step-by-step revealing
   - Visual representations (bars, circles, number lines)
   - Graph plotting for coordinate geometry
6. Video length: 2-5 minutes depending on complexity
7. TTS narration: explain each step clearly
8. Text solution: also provide written solution below video
9. Similar problems: suggest 3 practice problems from question bank
10. History: save to user's math problem history

---

## Dependencies

**Blocking:** Stories 0.5 (Manim), 1.7 (RAG)
**Blocks:** Story 11.2

---

## Definition of Done

- [x] All AC met
- [x] Animations accurate
- [x] Multiple problem types supported
- [x] Tests passing

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-23 | 1.0 | Initial story creation | Bob (SM Agent) |

---

## Implementation Summary

### Files Created
1. **Migration 057**: `packages/supabase/migrations/057_math_solver.sql` - math_problems, math_problem_steps tables
2. **API Route**: `apps/web/src/app/api/math-solver/route.ts` - OCR, classification, step generation, Manim integration
3. **UI Page**: `apps/web/src/app/(dashboard)/math-solver/page.tsx` - Input form, video player, steps, history

### Key Features
- Input toggle: typed equation or image upload
- OCR processing with confidence scoring
- Problem classification: 10 types (arithmetic, algebra, geometry, etc.)
- AI step generation: 5-10 steps with visual type
- Manim animation request with 2-5 min duration target
- TTS narration integration
- Similar problems from question bank
- Full history with type filter and favorites

---

**Story Status:** COMPLETE
**Risk Level:** HIGH
**Estimated Effort:** Large (L)
