# Story 6.3: Smart Revision Booster - Weakness Detection Algorithm

**Epic:** 6 - Progress Tracking & Personalization
**Story Number:** 6.3
**Status:** Draft
**Created:** December 23, 2025
**Sprint:** Sprint 7 (Epic 6)
**Estimated Effort:** Large (L)
**Risk Level:** HIGH

---

## Story

**As a** UPSC aspirant,
**I want** an AI system that automatically identifies my 5 weakest topics each week,
**so that** I can focus my revision efforts on areas that need the most improvement.

---

## Acceptance Criteria

1. Weakness detection algorithm: analyzes quiz scores, time spent, video completion rates, answer writing grades per syllabus node
2. Scoring model: combines recency (last 7 days weighted 60%), historical performance (30%), topic priority (10% - GS1-4 topics weighted higher)
3. Weekly scan: runs every Sunday at midnight, identifies 5 weakest topics
4. Tie-breaking: if multiple topics have same score, prioritize by syllabus importance and exam weightage
5. Database table: `revision_targets` with user_id, topic_id, weakness_score, identified_date, status
6. Notification: sends push notification "Your weekly revision targets are ready!"
7. UI page: /revision displays current week's 5 targets with weakness scores and "Start Revision" button
8. Progress tracking: marks target as completed when user finishes revision bundle (video + flashcards + quiz)
9. Edge Function: `detect_weak_topics_pipe.ts` orchestrates weekly scan
10. Admin override: admins can manually add/remove revision targets for specific users

---

## Dependencies

**Blocking:** Stories 1.3, 2.2, 6.2 (progress data and dashboard)
**Blocks:** Story 6.4

---

## Definition of Done

- [ ] All AC met
- [ ] Algorithm accurately identifies weak topics
- [ ] Weekly scan executes successfully
- [ ] Notifications sent
- [ ] Tests passing

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-23 | 1.0 | Initial story creation | Bob (SM Agent) |
